@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    @apply bg-background text-foreground;
  }

  :root {
    --background: 48 83% 98%; /* Ivory White */
    --foreground: 20 14% 10%;

    --card: 0 0% 100%;
    --card-foreground: 20 14% 10%;

    --popover: 0 0% 100%;
    --popover-foreground: 20 10% 20%;

    --primary: 153 43% 31%; /* Deep Forest Green */
    --primary-foreground: 48 83% 98%;
    
    --secondary: 135 44% 52%; /* Herbal Green */
    --secondary-foreground: 48 83% 98%;
    
    --muted: 120 30% 95%;
    --muted-foreground: 20 10% 45%;
    
    --accent: 165 100% 95%; /* Soft Mint for gradient start */
    --accent-foreground: 153 43% 31%;
    
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    
    --border: 153 20% 88%;
    --input: 0 0% 100%;
    --ring: 153 43% 31%;
    
    --radius: 0.75rem;

    --protein: #86C166;
    --carbs: #F7C948;
    --fat: #D87E53;
  }
  
  .dark {
    --background: 140 10% 8%;
    --foreground: 120 5% 95%;

    --card: 140 10% 10%;
    --card-foreground: 120 5% 95%;

    --popover: 140 10% 8%;
    --popover-foreground: 120 5% 95%;

    --primary: 153 43% 41%;
    --primary-foreground: 48 83% 98%;

    --secondary: 135 44% 62%;
    --secondary-foreground: 48 83% 98%;

    --muted: 140 10% 18%;
    --muted-foreground: 120 5% 65%;

    --accent: 153 20% 15%;
    --accent-foreground: 120 5% 95%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --border: 140 10% 20%;
    --input: 140 10% 15%;
    --ring: 140 42% 55%;

    --protein: #86C166;
    --carbs: #F7C948;
    --fat: #D87E53;
  }
}

@layer base {
  * {
    @apply border-border;
  }
}

@layer utilities {
    .animate-fade-in-up {
        animation: fadeInUp 0.5s ease-out forwards;
    }
    
    .glassmorphism-card {
      background: rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .glassmorphism-input {
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(5px);
      -webkit-backdrop-filter: blur(5px);
      border-color: rgba(255, 255, 255, 0.3);
    }
    
    .gradient-button {
      background-image: linear-gradient(to right, #4CAF68, #69d88a);
      color: white;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px 0 rgba(76, 175, 104, 0.2);
    }
    
    .gradient-button:hover {
      background-image: linear-gradient(to right, #69d88a, #4CAF68);
      box-shadow: 0 6px 20px 0 rgba(76, 175, 104, 0.3);
      transform: scale(1.03);
    }

    .vignette {
      position: relative;
    }

    .vignette::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      box-shadow: inset 0 0 8rem 2rem rgba(0,0,0,0.05);
      pointer-events: none;
    }

    .animate-fade-in {
      animation: fadeIn 0.5s ease-in-out forwards;
    }

    .bg-protein {
      background-color: var(--protein);
    }
    .bg-carbs {
      background-color: var(--carbs);
    }
    .bg-fat {
      background-color: var(--fat);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
}

/* Autumn Leaf Intro Animation */
#introScreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('https://images.unsplash.com/photo-1508913923795-8653ba499c43?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxwb3YlMjBhdXR1bW4lMjBsZWF2ZXMlMjBmb290fGVufDB8fHx8MTc2MjkxOTQ0OXww&ixlib=rb-4.1.0&q=85&w=1920');
  background-size: cover;
  background-position: center;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  z-index: 9999;
  animation: fadeOutIntro 1.5s ease-out 3s forwards;
}

#introScreen::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.2); /* Soft dark overlay for contrast */
  z-index: 1;
}

.intro-content {
  z-index: 2;
  text-align: center;
}

.intro-title {
  font-size: 3rem;
  font-weight: 700;
  color: white;
  text-shadow: 0 2px 15px rgba(0, 0, 0, 0.5);
  animation: fadeInTitle 1.5s ease-out 0.5s forwards;
  opacity: 0;
  transform: translateY(20px);
}

@keyframes fadeInTitle {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeOutIntro {
  to {
    opacity: 0;
    visibility: hidden;
  }
}

.falling-leaves {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 2;
}

.leaf {
    position: absolute;
    top: -5%;
    background-color: rgba(255, 255, 255, 0.1);
    background-size: contain;
    background-repeat: no-repeat;
    width: 20px;
    height: 30px;
    animation: fall 10s linear infinite;
    -webkit-mask-size: contain;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-size: contain;
    mask-repeat: no-repeat;
    mask-position: center;
    -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><path d="M111.42,128a16.5,16.5,0,0,1-16.5-16.5c0-17.7,16.5-29.33,16.5-43.29,0-13-11.64-23.57-26.29-23.57-13.88,0-25.12,10-25.12,22.4,0,10.22,12.79,16.5,17.26,16.5a1.2,1.2,0,0,1,0,2.41c-5.32,0-20.07-6.52-20.07-18.91,0-14.47,13.1-26,27.93-26,16,0,29.1,11.83,29.1,26.43,0,15.7-18.17,29.1-19.3,44.9H111.42A19.33,19.33,0,0,0,128,91.88,19.52,19.52,0,0,0,111.42,73,18.75,18.75,0,0,0,94.27,87.64a1.2,1.2,0,0,1-1.65,0,1.21,1.21,0,0,1,0-1.69,16.32,16.32,0,0,1,18.8-11.82,16.13,16.13,0,0,1,16.12,16.12,16.85,16.85,0,0,1-17.57,17.57H64a1.2,1.2,0,0,1-1.2-1.2V1.2A1.2,1.2,0,0,1,64,0h2.41a1.2,1.2,0,0,1,1.2,1.2V105.77H111.42a16.5,16.5,0,0,1,0,33Z" fill="white"/></svg>');
     mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><path d="M111.42,128a16.5,16.5,0,0,1-16.5-16.5c0-17.7,16.5-29.33,16.5-43.29,0-13-11.64-23.57-26.29-23.57-13.88,0-25.12,10-25.12,22.4,0,10.22,12.79,16.5,17.26,16.5a1.2,1.2,0,0,1,0,2.41c-5.32,0-20.07-6.52-20.07-18.91,0-14.47,13.1-26,27.93-26,16,0,29.1,11.83,29.1,26.43,0,15.7-18.17,29.1-19.3,44.9H111.42A19.33,19.33,0,0,0,128,91.88,19.52,19.52,0,0,0,111.42,73,18.75,18.75,0,0,0,94.27,87.64a1.2,1.2,0,0,1-1.65,0,1.21,1.21,0,0,1,0-1.69,16.32,16.32,0,0,1,18.8-11.82,16.13,16.13,0,0,1,16.12,16.12,16.85,16.85,0,0,1-17.57,17.57H64a1.2,1.2,0,0,1-1.2-1.2V1.2A1.2,1.2,0,0,1,64,0h2.41a1.2,1.2,0,0,1,1.2,1.2V105.77H111.42a16.5,16.5,0,0,1,0,33Z" fill="white"/></svg>');
}


@keyframes fall {
    0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(105vh) rotate(720deg);
        opacity: 0;
    }
}

.leaf:nth-child(1) { left: 10%; animation-delay: 0s; animation-duration: 12s; background-color: #ffcc80; }
.leaf:nth-child(2) { left: 20%; animation-delay: -2s; animation-duration: 10s; background-color: #ef9a9a; }
.leaf:nth-child(3) { left: 30%; animation-delay: -4s; animation-duration: 13s; background-color: #fff59d; }
.leaf:nth-child(4) { left: 40%; animation-delay: 0s; animation-duration: 9s; background-color: #c5e1a5; }
.leaf:nth-child(5) { left: 50%; animation-delay: -5s; animation-duration: 11s; background-color: #ffab91; }
.leaf:nth-child(6) { left: 60%; animation-delay: -1s; animation-duration: 12s; background-color: #f48fb1; }
.leaf:nth-child(7) { left: 70%; animation-delay: -3s; animation-duration: 10s; background-color: #b39ddb; }
.leaf:nth-child(8) { left: 80%; animation-delay: -6s; animation-duration: 14s; background-color: #90caf9; }
